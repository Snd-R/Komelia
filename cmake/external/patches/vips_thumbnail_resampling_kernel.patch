Subject: [PATCH] vips_thumbnail resampling kernel
---
Index: libvips/resample/thumbnail.c
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/libvips/resample/thumbnail.c b/libvips/resample/thumbnail.c
--- a/libvips/resample/thumbnail.c	(revision 0b3a70c94e2530b79b8a14daa09079454c4d771d)
+++ b/libvips/resample/thumbnail.c	(date 1759172814248)
@@ -152,6 +152,7 @@
 	/* Pyramids are stored in pages.
 	 */
 	gboolean page_pyramid;
+	VipsKernel kernel;
 
 } VipsThumbnail;
 
@@ -811,7 +812,7 @@
 		in = t[4];
 	}
 
-	if (vips_resize(in, &t[5], 1.0 / hshrink, "vscale", 1.0 / vshrink, NULL))
+	if (vips_resize(in, &t[5], 1.0 / hshrink, "vscale", 1.0 / vshrink, "kernel", thumbnail->kernel, NULL))
 		return -1;
 	in = t[5];
 
@@ -1070,6 +1071,13 @@
 		VIPS_ARGUMENT_OPTIONAL_INPUT | VIPS_ARGUMENT_DEPRECATED,
 		G_STRUCT_OFFSET(VipsThumbnail, output_profile),
 		NULL);
+
+	VIPS_ARG_ENUM(class, "kernel", 999,
+		_("Kernel"),
+		_("Resampling kernel"),
+		VIPS_ARGUMENT_OPTIONAL_INPUT,
+		G_STRUCT_OFFSET(VipsThumbnail, kernel),
+		VIPS_TYPE_KERNEL, VIPS_KERNEL_LANCZOS3);
 }
 
 static void
@@ -1080,6 +1088,7 @@
 	thumbnail->auto_rotate = TRUE;
 	thumbnail->intent = VIPS_INTENT_RELATIVE;
 	thumbnail->fail_on = VIPS_FAIL_ON_NONE;
+	thumbnail->kernel = VIPS_KERNEL_LANCZOS3;
 }
 
 typedef struct _VipsThumbnailFile {
